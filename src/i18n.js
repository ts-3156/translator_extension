const values = {
  en: {
    translate: '<span class="clickable">Translate into</span> %{selector}',
    automatic: 'Automatic',
    extension_options: 'Extension Options',
    extension_website: 'Open website',
    extension_deepl_website: 'View on a large page',
    de: 'German',
    en: 'English',
    'en-gb': 'British English',
    'en-us': 'American English',
    fr: 'French',
    es: 'Spanish',
    it: 'Italian',
    ja: 'Japanese',
    nl: 'Dutch',
    pl: 'Polish',
    pt: 'Portuguese',
    'pt-br': 'Brazilian Portuguese',
    'pt-pt': 'European Portuguese',
    ru: 'Russian',
    zh: 'Chinese',
    input_text: 'Input text',
    error_text: 'Error message',
    error_message: 'Sorry, an error has occurred. <br><br>If you are using the license key for the trial version, please <a class="sign-in" href="#">sign in</a> and enter the license key for the free version.',
    error_reason: {
      ContextInvalidatedError: 'Deep Translator have been updated. Please refresh this page.',
      EmptyWordError: 'No text is selected.',
      OnlyNumbersWordError: 'Text with only numbers cannot be translated.',
      ConnectionRefusedError: 'Failed to connect to the Internet. ',
      ParseError: 'Failed to interpret the translation result.',
      GeneralError: 'A general error occurred.',
      UnknownError: 'An unknown error occurred.',
      RequestTimeout: 'The request timed out.',
      InternalServerError: 'A server error has occurred.',
      BadRequest: 'Request failed.',
      CharsPerTranslationExceeded: 'The maximum number of characters per translation has been exceeded.<br><br>If you are using the license key for the trial version, please <a class="sign-in" href="#">sign in</a> and enter the license key for the free version.',
      TotalCharsExceeded: 'The maximum number of characters for all translations has been exceeded.<br><br>If you are using the license key for the trial version, please <a class="sign-in" href="#">sign in</a> and enter the license key for the free version.',
      contact: 'If same error occurs repeatedly, please contact <a href="https://twitter.com/deeptranslator">@deeptranslator</a>.'
    },
    options: {
      language: 'UI language',
      website_description: 'This page is extension options of Deep Translator. If you want to manage your account or licenses, please go to our website.',
      website_link: 'Deep Translator website',
      how_to_use: 'How to use',
      how_to_use_description: 'Select the text you want to translate and click on the icon that appears.',
      how_to_use_step1: 'Step 1: select the text',
      how_to_use_step2: 'Step 2: click on the icon',
      account: 'Account',
      sign_out: 'Sign out',
      license_key: 'License key',
      license_key_description_unknown: 'Please enter a valid license key. You can get a license for the free version by simply <a class="sign-in" href="#">logging in</a>.',
      license_key_description_free: 'You have entered your license key for <b>the free version</b>. If you want to translation more sentences, please use the professional version.',
      license_key_description_pro: 'You have entered your license key for <b>the professional version</b>.',
      license_key_description_trial: 'You have entered your license key for the trial version. This key can only be used <b>immediately after installation</b>. Please <a class="sign-in" href="#">sign in</a> to get the license key for the free version.',
      license_key_help: 'To get a license key for the free version, please <a class="sign-in" href="#">sign in</a>.',
      license_key_help_free: 'To get a license key for the professional version, please check <a class="sign-in" href="#">pricing plans</a>.',
      license_key_help_pro: '<a class="sign-in" href="#">Manage license</a>',
      pricing_plans: 'Pricing plans',
      support_account: 'Support account',
      privacy_policy: 'Privacy policy',
      terms_of_service: 'Terms of service',
      source_language: 'Source language',
      target_language: 'Target language',
      save_histories: 'Save histories',
      save_histories_help: 'If \'yes\' is selected, your translation history will be saved on your browser.',
      yes: 'Yes',
      no: 'No',
      website: 'Open website',
      website_help: 'If \'yes\' is selected, your translation history will be saved on your browser.',
      sign_in: 'Sign in with Google',
      save: 'Save',
      restore: 'Restore Defaults',
      test_connection_succeeded: 'Test connection succeeded',
      test_connection_failed: 'Test connection failed',
      invalid_key_format: 'Invalid key format'
    }
  },
  ja: {
    translate: '%{selector} <span class="clickable">に翻訳する</span>',
    automatic: '自動検出',
    extension_options: '拡張機能オプション',
    extension_website: 'Webサイトを開く',
    extension_deepl_website: '大きなページで見る',
    de: 'ドイツ語',
    en: '英語',
    'en-gb': 'イギリス英語',
    'en-us': 'アメリカ英語',
    fr: 'フランス語',
    es: 'スペイン語',
    it: 'イタリア語',
    ja: '日本語',
    nl: 'オランダ語',
    pl: 'ポーランド語',
    pt: 'ポルトガル語',
    'pt-br': 'ブラジルポルトガル語',
    'pt-pt': 'イベリアポルトガル語',
    ru: 'ロシア語',
    zh: '中国語',
    input_text: '入力したテキスト',
    error_text: 'エラーメッセージ',
    error_message: '申し訳ありません、エラーが起きました。<br><br>トライアル版のライセンス キーをご利用の場合は、<a class="sign-in" href="#">ログイン</a>して無料版のライセンス キーを入力してください。',
    error_reason: {
      ContextInvalidatedError: 'Deep Translator が更新されました。ページを再読み込みしてください。',
      EmptyWordError: 'テキストが選択されていません。',
      OnlyNumbersWordError: '数字だけのテキストは翻訳できません。',
      ConnectionRefusedError: 'インターネットの接続に失敗しました。',
      ParseError: '翻訳結果の解釈に失敗しました。',
      GeneralError: '一般的なエラーが起きました。',
      UnknownError: '原因不明のエラーが起きました。',
      RequestTimeout: 'リクエストがタイムアウトしました。',
      InternalServerError: 'サーバーエラーが起きました。',
      BadRequest: 'リクエストに失敗しました。',
      CharsPerTranslationExceeded: '1回で翻訳できる文字数の上限を超えました。<br><br>トライアル版のライセンス キーをご利用の場合は、<a class="sign-in" href="#">ログイン</a>して無料版のライセンス キーを入力してください。',
      TotalCharsExceeded: '翻訳できるトータルの文字数の上限を超えました。<br><br>トライアル版のライセンス キーをご利用の場合は、<a class="sign-in" href="#">ログイン</a>して無料版のライセンス キーを入力してください。',
      contact: '何度も起きる場合は、<a href="https://twitter.com/deeptranslator">@deeptranslator</a> までご連絡ください。'
    },
    options: {
      language: 'UIの言語',
      website_description: 'このページは Deep Translator の拡張機能オプションです。アカウントやライセンスの管理を行う場合は、ウェブサイトをご利用ください。',
      website_link: 'Deep Translator ウェブサイト',
      how_to_use: '使い方',
      how_to_use_description: '翻訳したいテキストを選択し、表示されたアイコンをクリックしてください。',
      how_to_use_step1: 'ステップ 1: テキストを選択する',
      how_to_use_step2: 'ステップ 2: アイコンをクリックする',
      account: 'アカウント',
      sign_out: 'ログアウト',
      license_key: 'ライセンス キー',
      license_key_description_unknown: '有効なライセンス キーを入力してください。無料版のライセンスは<a class="sign-in" href="#">ログイン</a>するだけで取得できます。',
      license_key_description_free: '<b>無料版</b> のライセンス キーが入力されています。もっとたくさん翻訳したい場合は、プロフェッショナル版をご利用ください。',
      license_key_description_pro: '<b>プロフェッショナル版</b> のライセンス キーが入力されています。',
      license_key_description_trial: 'トライアル版 のライセンス キーが入力されています。このキーは<b>インストール直後のみ</b>使えます。<a class="sign-in" href="#">ログイン</a>して無料版のキーを取得してください。',
      license_key_help: '無料版のライセンス キーを取得するには、<a class="sign-in" href="#">ログイン</a>してください。',
      license_key_help_free: 'プロフェッショナル版のライセンス キーが必要ですか？ <a class="sign-in" href="#">料金プラン</a>をご覧ください。',
      license_key_help_pro: '<a class="sign-in" href="#">ライセンスの管理</a>',
      pricing_plans: '料金プラン',
      support_account: 'サポートアカウント',
      privacy_policy: 'プライバシーポリシー',
      terms_of_service: '利用規約',
      source_language: '翻訳前の言語',
      target_language: '翻訳後の言語',
      save_histories: '履歴を保存する',
      save_histories_help: '\'はい\' を選択すると、翻訳履歴がブラウザに保存されます。',
      yes: 'はい',
      no: 'いいえ',
      website: 'ウェブサイトを開く',
      sign_in: 'Googleでログイン',
      save: '変更を保存する',
      restore: 'デフォルトを復元する',
      test_connection_succeeded: '有効なキーが入力されました',
      test_connection_failed: '無効なキーが入力されました',
      invalid_key_format: '無効なキーの形式です'
    }
  }
}

export class I18n {
  constructor(language) {
    this.language = language
  }

  t(key, attrs) {
    let text

    try {
      if (key.includes('.')) {
        text = values[this.language][key.split('.')[0]][key.split('.')[1]]
      } else {
        text = values[this.language][key]
      }

      if (attrs) {
        Object.keys(attrs).forEach(function (key) {
          text = text.replace(new RegExp('%{' + key + '}', 'g'), attrs[key])
        })
      }
    } catch (e) {
      console.error(e)
      text = 'translation missing: ' + this.language + '.' + key
    }

    return text
  }

  exist(key) {
    const value = this.t(key)
    return value && !value.match(/^translation missing/)
  }
}
